<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="../css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="../css/ui-box.css">
        <link rel="stylesheet" href="../css/ui-base.css">
        <link rel="stylesheet" href="../css/ui-color.css">
        <link rel="stylesheet" href="../css/appcan.icon.css">
        <link rel="stylesheet" href="../css/appcan.control.css">
        <link rel="stylesheet" href="../css/project/new.css">
    </head>
    <body class="um-vp sc-bg" ontouchstart>
        <div class="conbor">
            <div class="consj">
                <div class="ulev2 uin9">
                    支付宝
                </div>
                <div class="uin8">
                    订单信息
                </div>
                <div class="uin10">
                    标题
                </div>
                <!--文本输入开始-->
                <div class="c-wh ubb ubt bc-border uinput ub ub-f1">
                    <div class="umw1-7"></div>
                    <input placeholder="" type="text"  class="ub-f1 font-c" id="subject" value="珍珠项链">
                </div>
                <!--文本输入结束-->
                <div class="uin8">
                    简介
                </div>
                <div class="c-wh ubb ubt bc-border  uinput ub ub-f1">
                    <div class="umw1-7"></div>
                    <textarea placeholder="hello,appcan" type="text" class="ub-f1 font-c"  id="bodyy">韩版,韩国流行饰品小太阳花小巧雏菊 珍珠项链2M15。</textarea>
                    <div class="umw1-7"></div>
                </div>
                <div class="uin8">
                    总价
                </div>
                <!--文本输入开始-->
                <div class="c-wh ubb ubt bc-border uinput ub ub-f1">
                    <div class="umw1-7"></div>
                    <input placeholder="" type="number"  class="ub-f1 font-c" id="fee" value="0.01">
                </div>
                <!--文本输入结束-->
                <div class="uin8">
                    编号
                </div>
                <!--文本输入开始-->
                <div class="c-wh ubb ubt bc-border uinput ub ub-f1">
                    <div class="umw1-7"></div>
                    <input placeholder="" type="text"  class="ub-f1 font-c" id="num" value="200155555">
                </div>
                <!--文本输入结束-->
                <div class="umh1"></div>
                <div class="uin8">
                    商家信息
                </div>
                <div class="uin10">
                    回调地址
                </div>
                <!--文本输入开始-->
                <div class="c-wh ubb ubt bc-border uinput ub ub-f1">
                    <div class="umw1-7"></div>
                    <input placeholder="" type="text"  class="ub-f1 font-c" id="notifyURL" value="www.123.com">
                </div>
                <!--文本输入结束-->

                <div class="umh1"></div>
                <div class="uin">
                    <div class="ub btn bc-text-head bc-btn ub-ac ub-pc" id="btn1">
                        点击购买
                    </div>
                </div>
                <div class="uin8">
                    支付结果
                </div>
                <div class="ubb ubt bc-bg  tcxx breakword" id="adre"></div>
                <div class="umh1"></div>
            </div>
        </div>
    </body>
    <script src="../js/appcan.js"></script>
    <script src="../js/appcan.control.js"></script>
    </body>
    <script>
        var subject;
        var body;
        var fee;
        var num;
        var notifyUrl;
        var partner = "2088211417267818";
        var seller = "78871900@qq.com";
        var rsaPrivate = "MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAKbw8KoSfMCmRFRvsSMRF0zsYTtAP6rF2XGpfAlvE/Y6vyJGNzIDOTCHTYCw28Un7XMz6grtRALVltXzzT7W45BSSINAYqmfWWiYGrZjgjWRdq15XHTDBY+Jfyy3Y+eRRwogTQjG7I0ke8mod6e/C4ey1ALExseqaSb/e+35fYQNAgMBAAECgYEAhN5lnedC9Y4f+lg/UxqqQeYtaRw00DXSYD215EhNSf/t2liqW5rnLLGzxMZ+1Id33OYn0/SN2fenqrf11prv2MgaxoBbcVWfr1IXsgnem/FAi3V6avoaixop56FXhasUkxjczlijlqB5kLS3cWZbPhVYhn4E3TszcjtLOsIe6D0CQQDRQnWcaXH/aFh/0g9gllG52F5yOXkEGPMLEc1h3hD9+SXn9QqnM50ZHJBarPo/FriVa2ZjTDHtb8WEILNu4pMrAkEAzDqyeJfP5DcQcwaJpRCaFReVeHhViG3z3Yq8vVprCS45ly3fSRddL4H8SGWwDEoB+OzkzwGb/E/bBFpKgAkJpwJAKOvmNAAq2td89wINH8ZFlSJK1euHTtXSMYf5sfnLON9QGlxBCRF+1zpOwGyzQ0MeNZobG6/604PYDE6YyEZmoQJBAL41lO84BUl593oKBryTn84xLucKvC7aqRwXEP4SbkoYoU6qTKGYfxO2Lq+G9dYcP4YFrH0X9J2kCkodhfGFeVUCQAXFkzIfRRui37Rjppjms7YfIvRNx4tJDmFHlFNTCWtplAKf7CGVQ/nsvyywjA+i+0vmaftUzoOdIcWnI8UEr9I=";
        var rsaPublic = "MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCnxj/9qwVfgoUh/y2W89L6BkRAFljhNhgPdyPuBV64bfQNN1PjbCzkIM6qRdKBoLPXmKKMiFYnkd6rAoprih3/PrQEB/VsW8OoM8fxn67UDYuyBTqA23MML9q1+ilIZwBC2AQ2UBVOrFXfFl75p6/B5KsiNG9zpgmLCUYuLkxpLQIDAQAB";

        function setInfo() {
            notifyUrl = $("#notifyURL").val();
            uexAliPay.setPayInfo(partner, seller, rsaPrivate, rsaPublic, notifyUrl);
        }

        function pay() {
            setInfo();
            subject = $("#subject").val();
            //alert(subject);
            body = $("#bodyy").val();
            fee = $("#fee").val();
            num = $("#num").val();
            uexAliPay.pay(num, subject, body, fee);
        }

        function paySuccess(status, des) {
            $('#adre').html(des);
        }

        function payFailed(opCode, errorCode, des) {
            $('#adre').html(des);
        }

        /**
         * 判断是否是空
         * @param value
         */
        function isDefine(value) {
            if (value == null || value == "" || value == "undefined" || value == undefined || value == "null" || value == "(null)" || value == 'NULL' || typeof (value) == 'undefined') {
                return false;
            } else {
                value = value + "";
                value = value.replace(/\s/g, "");
                if (value == "") {
                    return false;
                }
                return true;
            }
        }


        appcan.ready(function() {
            uexAliPay.onStatus = paySuccess;
            uexWidgetOne.cbError = payFailed;
        });
        appcan.button('#btn1', 'ani-act', function() {
            //alert($('#bodyy').val());
            //alert(subject);
            if (isDefine($("#subject").val()) && isDefine($("#bodyy").val()) && isDefine($("#fee").val()) && isDefine($("#num").val()) && isDefine($("#notifyURL").val())) {
                pay();
            } else {
                alert("请将信息填写完整");
            }

        });
    </script>
</html>
